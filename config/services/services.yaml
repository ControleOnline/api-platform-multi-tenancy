services:
    ControleOnline\:
        resource: "../../src/*"
        exclude: "../src/{DependencyInjection,Entity,Resource,Migrations,Library,Tests,Kernel.php}"
    ControleOnline\Repository\:
        resource: "../../src/Repository"
        tags: ["doctrine.repository_service"]
        arguments:
            $registry: '@doctrine'        
    ControleOnline\EventListener\DatabaseSwitchService:
        arguments:
            $connection: '@doctrine.dbal.default_connection'
    ControleOnline\EventListener\DatabaseSwitchListener:
        arguments:
            $DatabaseSwitchService: '@ControleOnline\Service\DatabaseSwitchService'
        tags:
            - { name: 'kernel.event_listener', event: 'kernel.request', method: 'onKernelRequest', priority: 512 }
    ControleOnline\Command\MigrateCommand:
        arguments:
            $DatabaseSwitchService: '@ControleOnline\Service\DatabaseSwitchService'
        tags:
            - { name: 'console.command' }